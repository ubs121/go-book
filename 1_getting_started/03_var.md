
# Хувьсагч

Бид заавар өгч тооцоолсон үр дүнгээ хадгалах хэрэгтэй. Хувьсагч энэ боломжийг олгоно. Хувьсагч бол өгөгдөл хадгалах үндсэн нэгж юм. Гэхдээ өгөгдлийг түр хугацаанд санах ойд хадгална, ө.х програм ажиллах хугацаанд хадгална. Програм ажиллаж дуусаад санах ойгоос буухад хувьсагчид алга болж санах ойгоос цэвэрлэгдэнэ.

## Хувьсагчид нэр оноох

Програмд олон хувьсагчийг хооронд нь ялгах зорилгоор нэр өгдөг. Нэр нь утга учиртай, тодорхой, тухайн хувьсагчийн зориулалтад тохирсон байх хэрэгтэй.

Дараах кодонд `a`, `b`  бүхэл тоон хувьсагчид зарласан нь ойлгомжтой байна. Гэвч юунд зориулсан хувьсагчид вэ гэдэг нь ойлгомжгүй байна.

```go
var a int
var b int
```

Дараах хувьсагч зарлалт нь илүү тодорхой, ойлгомжтой байна:

```go
var accountNumber int
var balanceOwed   float64
```

Хувьсагчид нэр оноохдоо дараах дүрмийг мөрдөх хэрэгтэй:

* Нэрийг хэт товчлохоос зайлсхийх
* Нэр нь ойлгомжтой, утга учиртай байх
* Нэр нь үсэг, тоо агуулсан байж болно, харин тусгай тэмдэгт ашиглах хэрэггүй
* Пакетын гаднаас ашиглах хувьсагчийг том үсгээр эхлүүлж бичнэ (`Sam`), дотор ашиглах бол жижгээр бичнэ (`sam`).
* Go хэлний нөөц үгүүдийг нэр болгон ашиглаж болохгүй. Go хэлэнд 25  түлхүүр үг бий. Эдгээр нь тус бүрдээ өөрийн гэсэн зориулалттай байна.

Зөв нэрсийн жишээ:

```go
averageScore         /* бүх онооны дундаж */
pi             /* pi тогтмол */
numberOfStudents /* анги дахь оюутны тоо */
```

Буруу нэрс:

```go
3rd_entry     /* Тоогоор эхэлсэн */
all$done     /* "$" агуулсан */
the end     /* Сул зай агуулсан */
int         /* Нөөцөлсөн үг */
```

## Хувьсагчийн төрөл

### Бүхэл тоо

`1`, `87`, `-222`, `675_000` зэрэг тоонууд нь бүхэл тоонууд юм. Бүхэл тоог `int8`, `int16`, `int32`, `int64`, `uint8`, `uint16`, `uint32`, `uint64` төрлүүдээр тодорхойлдог. `8`, `16`, `32`, `64` зэрэг төгсгөл нь тухайн төрөл ямар хэмжээтэй болохыг илэрхийлнэ. Эхний `u` нь тэмдэггүй буюу эерэг тоо гэдгийг илэрхийлнэ.

`uint8` тоог өөрөөр _байт_ (byte) гэж нэрлэдэг. Байт нь компютерийн системд маш өргөн хэрэглэгддэг нэгж юм. `1 байт = 8 бит`, `1024 байт = 1 килобайт`, `1024 килобайт = 1 мегабайт` гэх мэт нэрлэдэг.

### Бодит тоо

`5.5`, `8.3`, `-12.6` зэрэг нь хөвөгч цэгтэй бодит тоонууд юм. Бодит тоонд хөвөгч цэгийг ашигладаг. Ө.х `5.0` нь бодит тоо,`5` нь бүхэл тоо юм. Бодит тоог `float32`, `float64` төрлүүдээр тодорхойлно. Эдгээрийг харгалзан _дан_, _давхар_ нарийвчлалтай бодит тоонууд гэж бас хэлдэг.

Нарийвчлал нь тухайн бодит тоон төрөл хичнээн цифр дүрсэлж чадахыг илэрхийлдэг. Төрлийн хэмжээ их байвал илүү олон цифр хадгалах буюу нарийвчлал нь өндөр байна. Жишээ нь, "зургаан цифрийн нарийвчлал" гэдэг нь тухайн төрөл зургаан цифр бүхий бодит тоо хадгалахад хүрэлцэнэ гэсэн үг. Энд хөвөгч цэг нь хаана байрлах нь хамаагүй. Тухайлбал, `123456.0` ба `0.123456` утгууд нь санах ойд хоёулаа ижил хэмжээний зай эзлэх болно.

### Тэмдэгт мөр

Тэмдэгт мөр нь дан эсвэл давхар хашилтад бичигдсэн тэмдэгтийн дараалал буюу текст юм. Давхар хашилтанд нэг л мөр текст бичдэг бол дан хашилтад олон мөр текст бичиж болно.

Жишээ нь, `“Hello world!”` эсвэл

```go
`Hello
   World!`
```

гэж бичнэ.

Тэмдэгт мөрийн уртыг тодорхойлох шаардлага олон гардаг. Үүнд `len()` функцийг ашиглаж  болно:

```go
len("Hello World")
```

Тэмдэгт мөрийн цуваанаас тодорхой нэг тэмдэгтийг ялгах бол `[]` үйлдлийг ашиглана. Жишээ нь текстийн хамгийн эхний тэмдэгтийг `[0]` гэж ялгаж авч болно.  

## Хувьсагчийн орших хүрээ ба хугацаа

Хувьсагч нь тодорхой хүрээ, хугацаанд "амьд" байдаг. Хүрээ гэдэг нь тухайн хувьсагч програмын ямар хэсэгт хүчинтэйг илэрхийлнэ. Хүрээнээс хамааран хувьсагчийг глобал болон локал хүрээний хувьсагч гэж ангилдаг.

Глобал хувьсагч нь програмын аль ч хэсэгт хүчинтэй бөгөөд түүний хүрээ нь програм бүтнээрээ байдаг.

```go
package main
import "fmt"

var x string = "Hello World"

func main() {
    fmt.Println(x) // энд 'x'-г ашиглаж болно
}

func f() {
    fmt.Println(x) // мөн энд 'x' хүчинтэй
}
```

Локал хувьсагч нь түүний зарлагдсан блок дотор л хүчинтэй бөгөөд блокоос гадна уг хувьсагчид хандах боломжгүй болно.

```go
package main
import "fmt"

func main() {
    var x string = "Hello World"
    fmt.Println(x)
}

func f() {
    // АЛДАА: x хувьсагчид эндээс хандах боломжгүй
    fmt.Println(x)
}
```

## Төрөл хувиргах

Ялгаатай төрлийн хувьсагчдыг нэг илэрхийлэлд оруулж бичих шаардлага олонтаа гардаг. Энэ үед хөрвүүлэгч тэдгээрийг ижил төрөл рүү хувиргахыг оролддог, хэрэв нэг төрөлд оруулж чадахааргүй бол хувьсагчийн төрлийг хувиргахыг шаарддаг.

Хувиргалтыг хоёр аргаар хийдэг.

| Хувиргах үйлдэл | Тайлбар | Жишээ |
| :--- | :--- | :--- |
| төрөл(хувьсагч) | Тодорхой төрлүүдийн хооронд хувиргах. | Жнь: int32(11) |
| хувьсагч.(төрөл) | Тодорхой бус төрлүүдийн хооронд хувиргах | Жнь:  x.(string) |

Энд `x` нь `interface` буюу тодорхой бус төрөлтэй хувьсагч. Тухайлбал бүхэл тоон төрлүүдийн хооронд хувиргалт хийх бол төрөл(хувьсагч) хувилбарыг ашиглана. Учир нь төрөл нь тодорхой, мөн ойролцоо байна.

Тоон төрлийн хэмжээнээс хамаараад хувиргалт ялгаатай явагдана. Том хэмжээтэй хувьсагчид бага хэмжээтэй утга оноох үед алдаагүй хувиргалт хийнэ. Харин бага хэмжээтэй хувьсагчид том хэмжээтэй утга оноох бол өгөгдлийн зарим хэсэг алдагдах эрсдэлтэй.

`int8 < int15 < int32 < int64`

Жишээлбэл бүхэл, бодит тоог илэрхийлэлд хослуулан хэрэглэх бол төрөл хувиргалт хэрэгтэй болно:

```go
package main
import "fmt"

var won, lost int = 5, 3

func main() {
  ratio:= float32(won) / float32(lost)
  fmt.Printf("хожил/хожигдолын харьцаа = %f\n", ratio)
}
```

Дараах жишээнд `anything` нэртэй тодорхой бус төрөлтэй хувьсагчийг тэмдэгт мөр болгон хувиргаж байна.

```go
var anything interface{} = 123
aString:=anything.(string)
```

Хэрэв хувиргалтад алдаа гарвал програм тасрах болно. Үүнээс сэргийлэхийн тулд үр дүнг дараах байдлаар шалгах хэрэгтэй.

```go
aString, found := anything.(string)
```

Хувиргаж байгаа өгөгдлийн төрлийг мэдэхгүй бол `.(type)` үйлдлээр төрлийг мэдэж болно.

```go
switch v := anything.(type) {
    // төрлөөс хамааран үйлдэл хийх, v нь төрлийн нэр байна
    case string:
        fmt.Println(v)
    case int, int32, int64:
        fmt.Println(v)
    default:
        fmt.Println("unknown")
}
```

## Илэрхийлэл

Энгийн тооцоолол хийхэд илэрхийллийг ашиглана. _Илэрхийлэл_ гэдэг нь тогтмол утга, хувьсагч, үйлдлийг залган нийлүүлсэн цуваа юм.

Жишээ нь:

```go
(1 + 2) * 4
a + 1.0
z / math.Sqrt(2.0)
2.0 * math.Sin( 3.14159 * angleDegrees/180.0 )
```

Илэрхийллийн зорилго нь утгууд дээр тооцоолол, үнэлэлт хийж үр дүн гарган авахад оршдог. _Илэрхийллийн төрөл_ гэдэг нь түүнийг үнэлээд гарах утгын төрөл юм.

Илэрхийллийг тооцоолоход үйлдлийн зэрэглэл гэсэн ойлголт чухал байдаг. _Үйлдлийн зэрэглэл_ нь илэрхийлэл дэх аль хэсэг эхэлж үнэлэгдэх вэ гэдгийг тодорхойлно.

Жишээ нь, илэрхийлэлд `*`, `/`, `%` зэрэг арифметик үйлдэл нь `+`,  `-` үйлдлээс өндөр зэрэглэлтэй. Тиймээс `a - b * c` илэрхийлэл нь `a - (b * c)` илэрхийлэлтэй ижил юм. Хэрэв үйлдлүүдийг өөрөөр бүлэглэхийг хүсэж байгаа бол хаалтыг ашиглах хэрэгтэй: `(a - b) * c`.

## Тайлбар

Тайлбар нь програмын элементүүдийг тайлбарлахад хэрэглэгдэнэ. Хөрвүүлэгч нь тайлбарыг алгасаж хөрвүүлдэг, ө.х эцсийн машины кодонд тайлбар нь орохгүй, нөлөө үзүүлэхгүй гэсэн үг.

Тайлбарыг хоёр хэлбэрээр хийж болно:

* Нэг мөр тайлбар нь `//`-аар эхлэх ба мөрийн төгсгөл дээр төгсөнө
* Блок тайлбар нь `/*  тайлбар  */`  хэлбэртэй бичигдэнэ

Зарим хүн програмыг зөвхөн компютерт зориулсан зааврууд гэж ойлгодог. Энэ нь буруу ойлголт юм. Зөвхөн машинд зориулж програм бичдэг гэвэл өрөөсгөл зүйл болно. Тийм програмууд нь уншиж ойлгох, засварлахад маш хүнд байдаг бөгөөд заримдаа зохиогч нь өөрөө ойлгохгүй байх нь ч бий.

Тэгэхээр, програмын эх код нь компютерт зориулсан зааврууд мөн боловч хамгийн чухал нь хүн уншихад ойлгомжтой, тодорхой байх хэрэгтэй. Тийм учраас програмдаа хангалттай сайн тайлбар оруулж байх хэрэгтэй.

Үүнд дараах дүрмийг мөрдлөг болгох хэрэгтэй.

* Нэг функц хоёр хуудсаас урт сунжирсан байх хэрэггүй
* Олон давхар if зэрэг төвөгтэй нийлмэл логикоос зайлсхийх хэрэгтэй
* Урт сунжирсан команд, заавруудаас зайлсхийх хэрэгтэй

Програмчлалын хэл бүрт эх кодын формат нь өөр өөр стандарттай байдаг. Go хэлний хувьд эх кодыг автоматаар нэг форматад оруулдаг багаж бий.

Ер нь “Би энэ програмыг зөвхөн өөрөө өөртөө бичиж байна, тиймээс надад тайлбар хэрэггүй” гэж бодох хэрэггүй. Эхлээд код бичиж байх үед бүх зүйл тодорхой харагдах боловч түүнийгээ долоо хоногийн сүүлээр дахин харахад ойлгомжгүй, нууцлаг зүйлүүд их гарах болно. Тиймээс програмдаа тайлбар хийж байх хэрэгтэй.