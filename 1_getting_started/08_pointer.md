# Заагч

Функцэд хувьсагч дамжуулахад түүний утга нь функц уруу аргумент болон хуулагдана.

Жишээ нь дараах програмд `x` хувьсагчийг `zero()` функцэд дамжуулж байна. Функцийг дуудсаны дараа `x` утгыг хэвлэж үзэхэд анхны `5` гэсэн утга өөрчлөгдөөгүй байна. Үүгээр хувьсагчийн утгыг хуулж функцэд дамжуулдаг болох нь харагдана. Үүнийг мөн “утгаар дамжуулах” гэж нэрлэдэг.

```go
func main() {
    x := 5 // анхны утга нь 5 байна

    zero(x) // x хувьсагчийн утгыг дамжуулж байна
    fmt.Println(x) // x нь 5 хэвээр байна
}

func zero(x int) {
    x = 0 // утгыг 0 болгож байна, энэ өөрчлөлт зөвхөн 'zero' функц дотор хүчинтэй
}
```

Хэрэв функц дуудалтын дараа `x` утга өөрчлөгдсөн байхыг хүсвэл яах вэ? Үүнийг шийдэх нэг арга нь заагч ашиглах юм. 
_Заагч_ гэдэг нь санах ойн хаяг хадгалдаг нэг төрлийн хувьсагч юм. Ө.х заагчийн утга нь санах ойн ямар нэг хаяг байна.

Дараах жишээнд `zero()` функцэд заагч дамжуулж байна, ингэснээр `x`-н анхны 5 утгыг функц дотроос өөрчлөх боломжтой болно. `zero()` функцэд `x` хувьсагчийн санах ойн хаягийг дамжуулна, функц уг хаягаар дамжуулан `x` хувьсагчийн утгыг `0` болгон өөрчилнө.

```go
func main() {
    x := 5 // анхны утга нь 5 байна
    
    zero(&x) // x хувьсагчийн хаягийг дамжуулж байна
    fmt.Println(x) // одоо x нь 0-тэй тэнцүү байх ёстой
}

func zero(xPtr *int) {
    *xPtr = 0 // утгыг 0 болгож байна
}
```

Go хэлний заагч нь Си хэлнийхээс нэлээд өөр байдаг. Си шиг заагч дээр нэмэх, хасах гэх мэт үйлдэл хийх боломжгүй. Мөн санах ой цэвэрлэгээ нь автоматаар явагддаг, ө.х ашиглахгүй болсон обектуудыг санах ойгоос автоматаар чөлөөлдөг.

Заагч нь энгийн төрлүүд дээр бараг хэрэглэгдэхгүй боловч нийлмэл төрөл дээр их хэрэглэгддэг.

## \* ба & үйлдлүүд

Заагчийг `*` тэмдэгээр тодорхойлдог. Дээрх `zero()` функцийн `xPtr` нь `int` төрлийн заагч параметр байна.

`*` тэмдэг нь мөн заагчийн утгыг авахад ашиглагдана. Заагчийн утга гэдэг нь түүний зааж байгаа санах ойн байрлал (хаяг гэж бас хэлдэг) дахь утгыг юм. Жишээлбэл "*xPtr = 0" заавар нь “xPtr заагчийн зааж байгаа санах ойн байрлалд 0 утгыг хадгал” гэдгийг илэрхийлнэ.

Ямар нэг хувьсагчийн санах ой дахь хаягыг олох бол `&` үйлдлийг ашиглана. `&x` нь `*int` төрлийн заагч болно (`x` нь `int` төрөлтэй учраас). Дээрх жишээнд `main()` функц дотор байгаа `&x` , `zero()` функцийн `xPtr` нь хоёулаа ижил санах ойн байрлалыг заана.

## new

Заагч үүсгэх өөр нэг арга нь `new` функц ашиглах юм. `new` нь заасан төрлийн хэмжээтэй муж санах ойд хувиарлаад түүний хаягыг буцаадаг.

```go
func one(xPtr *int) {
    *xPtr = 1
}

func main() {
    xPtr := new(int) // new() функцээр заагч үүсгэж байна
    
    one(xPtr)
    fmt.Println(*xPtr) // x нь 1 болсон байна
}
```