# TCP/IP үндэс

IP багц протоколын хувьд том \(интернэт\) эсвэл жижиг \(байгууллага доторх\) сүлжээ аль нь ч байсан ижил зарчмаар ажилладаг.

Сервер гэж нэрлэгдэх програм бусад програм өөртэй нь холбогдохыг хүлээнэ. Энэ хооронд өөр нэг програм түүнтэй холбогдоно. Холбогдохын тулд сервер програмын сүлжээний байршил, портын дугаарыг мэдэх хэрэгтэй. Сервер холбогдох хүсэлтийг хүлээн аваад зөвшөөрөл өгнө. Ингээд хоёр програмын хооронд холбоо тогтмогц өгөгдөл солилцож эхлэнэ. Энэ бол TCP/IP протокол дээр суурилан сүлжээгээр харилцах үндсэн зарчим юм. Бусад олон протоколууд энэ зарчим дээр үндэслэсэн байдаг.

![](res/tcp_ip.png)

TCP нь холболт хандлагатай протокол юм, ө.х эхлээд холболт хийсний дараа өгөгдлийг илгээдэг. Зүйрлэвэл 2 хүн утсаар ярихын тулд эхлээд холболт тогтоосон байх хэрэгтэй болдогтой адил юм. Мөн өгөгдөл хүрэх газраа хүрсэн эсэхийг баталгаажуулж шалгаж байдаг. Хэрэв замын дундаас өгөгдөл “унавал” түүнийг дахин дамжуулдаг. Тиймээс дамжуулалтын чанар чухал байх програмуудад TCP протоколыг өргөн ашигладаг.

## IP хаяг

Мэдээлэл дамжуулалтад протоколоос гадна IP хаяг, сокет, порт зэрэг ухагдахуунуудыг мэдэх хэрэгтэй.

IP хаяг нь 32 бит буюу 4 байт хэмжээтэй тоон хаяг байдаг. Энэ тоон хаяг нь сүлжээн дэх тухайлсан нэг компютер буюу интерфэйс картыг заана.

4 байт гэдэг нь $$2^{32}$$ хэмжээтэй тэнцүү тооны төхөөрөмж, компютерийг хаяглах боломжтой гэсэн үг. Тиймээс үүнийг IPv4 хаяглалт гэж нэрлэдэг.

Сүүлийн жилүүдэд интернэт төхөөрөмжийн тоо асар их нэмэгдэж энэ тоо хүрэлцэхгүй болж эхэлсэн. Тиймээс ойрын хугацаанд IPv6 хаяглалт уруу шилжихээр эрчимтэй өөрчлөлт хийгдэж байна.

## IPv4 хаяглалт

IPv4 хаяглалт нь ихэвчлэн дөрвөн хэсэгт цэгээр тусгаарлан бичигддэг.

Жишээ нь

```
127.0.0.1
66.102.11.104
```

IP хаяг нь сүлжээ хаяг болон төхөөрөмжийн хаягаас тогтоно: сүлжээ хаяг гэдэг нь тухайн төхөөрөмж холбогдсон байгаа сүлжээний хаяг байдаг, IP хаяг нь тухайн сүлжээн дэх төхөөрөмжийн хаягыг заана.

Дээр үед IP хаягын бүрдэл хэсгийг хараад сүлжээ хаяг, төхөөрөмжийн хаягыг хялбар салгаж болдог байсан. Тухайлбал эхний 1 байт буюу 8 битийг сүлжээ хаяг болгоод үлдсэн гурван байтыг төхөөрөмжид зориулж ашиглаж байсан. Ийм хаяглалттай сүлжээг A ангиллын сүлжээ гэж нэрлэдэг байв.

Цаашлаад B ангиллын сүлжээнд эхний хоёр байтыг сүлжээнд, дараагийн хоёр байтыг төхөөрөмжийг ялгахад ашигладаг болсон.

Ерөнхийдөө 512 төхөөрөмж хаяглах бол 8 бит хүрэлцэхгүй учраас 9 бит хэрэгтэй болно, энэ үед 23 битийг сүлжээнд 9 битийг төхөөрөмжид ашиглаж болно. Үүнтэй төстэйгээр 1024 хүртэл төхөөрөмжтэй бол 22 битийг сүлжээнд, 10 битийг төхөөрөмж хаяглахад ашиглана.

Энэ мэтээр IP хаяг болон түүний хэдэн бит нь сүлжээнд ашиглаж байгааг мэдэж байвал тухайн сүлжээ болон сүлжээн дэх төхөөрөмжийн хаягийг хялбар олж болно. Үүнд "сүлжээний маск" гэсэн ойлголтыг ашигладаг. Жишээлбэл 16 бит нь сүлжээнд ашиглагдаж байгаа бол сүлжээ маск нь битээр  `11111111111111110000000000000000` хэлбэртэй бичигдэнэ. Үүнийг аравтын цифрээр илэрхийлвэл `255.255.0.0` гэж бичиж болно. Энэ мэтээр 24 бит сүлжээний маск `255.255.255.0`, 23 бит сүлжээний маск `255.255.254.0`, 22 бит сүлжээний маск `255.255.252.0` гэх мэтээр тооцоолно.

Үүний дараа төхөөрөмжийн хаягыг олохдоо түүний хаягийг сүлжээний маск хаягтай бит AND үйлдлээр холбож олно.

## IPv6 хаяглалт

Интернэт, сүлжээнд холбогдох төхөөрөмжийн тоо нэмэгдэх үед 32 битийн хаяглалт нь хүрэлцэхгүй болж ирсэн. Үүнийг NAT \(Network Address Translation\) зэрэг аргаар шийдэж болох боловч илүү өргөн хаяглалтын стандарт уруу шилжих гарцаагүй хэрэгцээтэй болсон юм.

IPv6 нь 128 битийн хаяглалт юм. Ийм урт цифрийг аравтаар дүрслэхэд нуршуу урт болох учраас ихэвчлэн арван зургаатын цифр ашигладаг. 16-тын цифрүүд дөрвөөр бүлэглэж : тэмдэгтээр тусгаарлагдан бичигдэнэ.

Жишээ нь

```
2002:c0e8:82e7:0:0:0:c0e8:82e7
0:0:0:0:0:0:0:1
```

16-тын цифр ашигласан ч нэлээд урт, тогтооход хэцүү харагдаж байгаа биз! Тиймээс зарим тэгийг хасаж товчилж бичиж болно. Жишээ нь localhost-н хаяг нь `0:0:0:0:0:0:0:1` байдаг бөгөөд үүнийг товчоор `::1` гэж бичиж болно.

