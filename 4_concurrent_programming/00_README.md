# Зэрэгцээ боловсруулалт

Зэрэгцээ боловсруулалт гэдэг нь нэг зорилготой олон ажлыг зэрэг амжуулах тухай юм. Ихэвчлэн том хэмжээний ажлыг жижиг хэсгүүдэд хэрхэн хуваах, ямар хэсгүүд нь зэрэг хийгдэх боломжтой, зэрэг ажиллахдаа хэсгүүд хоорондоо хэрхэн мэдээ солилцох зэргийг тооцож зохиомж хийнэ гэсэн үг. Зэрэгцээ боловсруулалтын ойрхон жишээ гэвэл бид компютерийн хулгана, гар, дэлгэцийг зэрэг ашигладаг. Хэрэв эдгээр төхөөрөмжүүд дараалж ажилладаг байсан бол хэчнээн болхи, үр ашиггүй байхыг та төсөөлж байгаа бизээ.

Дан процессор дээр ч зэрэгцээ боловсруулалтын тухай ярих боломжтой. Нэгэнт дан процессор дээр зэрэг гүйцэтгэж чадаж байвал олон процессор дээр бүр илүү үр дүнтэй байна. Энэ бол зэрэгцээ боловсруулалтын үндсэн санаа юм. 

Нэг процессор дээр сайн ажиллаж байсан програм 4 процессор дээр удаан ажиллах тохиолдол байдаг. Энэ бол зохиомж муу байгаагийн илрэл юм. Ө.х зэрэгцээ ажиллуулах талаар бодоогүй хийгдсэн програм байна гэсэн үг. Ийм програмын хувьд механикаар процессор, цөмийн тоог нэмээд ч олигтой үр дүнд хүрэхгүй.

Жишээ болгон хуучин хог шатаах ажлыг хэрхэн зэрэг, хурдан амжуулах хувилбаруудыг харая.

![](res/gophersimple1.jpg)

Зөвхөн 1 зурам ажиллавал  хэт удаан байх болно.

![](res/gophersimple1_1.jpg)

2 зурам ажиллавал нэмэлт тэрэг хэрэгтэй болно.

![](res/gophersimple2.jpg)

2 зурам 2 тэрэгтэй бол илүү хурдан дуусгана. Гэхдээ шатаах зуухан дээр очоод ээлжлэх хэрэгтэй болно. Зурамнууд хоорондоо ойлголцох хэрэгтэй болно, хүлээлт үүснэ.

![](res/gophercomplex0.jpg)

3 зурам ажиллаж болно. Гэхдээ зохицуулалт хийхгүй бол дундах зурам хоёр талд ээлжлэн хүлээх хэрэгтэй болно.

![](res/gophercomplex1.jpg)

4 зурам ажиллаад зөв зохицуулалт хийвэл анхны хувилбараас 4 дахин хурдан дуусгах болно.

Эндээс дүгнэхэд ажлыг маш олон аргаар хувааж, зохиомжилж болж байна. Зөвхөн механикаар зурмын тоог нэмээд хурдан болохгүй, зөв зохицуулалт, ажлын зөв хуваалт, хувиарлалт чухал болох нь харагдаж байна. Энэ бол зэрэгцээ боловсруулалтын зохиомж юм.

Нэгэнт оновчтой зохиомж гарсан бол үүнийг параллел болгоход маш хялбар байх болно. Тухайлбал хоёр шатаах зуух байсан бол анхны зохиомжийг өргөтгөөд ажлын параллел хоёр групп зохион байгуулж болно.

![](res/gophercomplex2.jpg)

Эндээс үзэхэд ажлыг зэрэг гүйцэтгэх, хамгийн бага хугацаанд гүйцэтгэх тухай бодох нь хөгжүүлэгчийн ур чадвараас ихээхэн хамааралтай болох нь ойлгогдоно.

Гэхдээ зэрэгцээ боловсруулалтад мөрддөг ерөнхий дүрмүүд бий.

* Жижиг хэсэг бүр 100μs -с 1ms хооронд тооцоолж дуусах боломжтой байх. Хэрэв хэт жижиг ажлууд бол процесс үүсгэх, ачаалах, цэвэрлэх гэх мэт "удирдлагын" шинжтэй үйлдлүүд ихсэх болно. Хэрэв хэт том бол зөвхөн нэг ажлыг дуусгахын тулд удаан хүлээлт үүсгэх болно. Энэ нь зэрэг боловсруулахын давуу талыг үгүй болгоно.

* Үл хамаарах хэсгүүдийн хооронд ашиглах дундын өгөгдлийг маш бага байлгах. Ялангуяа дундын санах ойн муж руу бичих үйлдэл нь удаашруулах, түгжээ үүсгэх гэх мэт асуудалтай байдаг. Харин унших үйлдэл нь асуудал багатай байдаг.

* Өгөгдлийг аль болох далдлах, локал ашиглах. Локал буюу кээшэд байгаа өгөгдөл нь унших, бичихэд илүү хурдан байдаг.

Сайн хэл, багаж байхаас гадна програмын дотоод зохиомж хамгийн чухал хэсэг нь байдаг. Бид програмын зохиомжоо хийх үедээ зэрэг "амжуулж" болох хэсгүүдийг олж харж чаддаг, тэдгээрийн холбоосыг сайн зохиомжилж чаддаг байх хэрэгтэй.

Зэрэгцээ програмчлалыг сайн ойлгохын тулд бодит ертөнц дээрх процессуудыг сайн ажиглах хэрэгтэй. Жишээ нь зам дээр явж байгаа машинуудыг харж болно. Машинууд бие биенээс үл хамааран урагшлах нь зэрэгцээ өрнөж байгаа процесс, гэхдээ тэд осол аваар гаргахгүйн тулд хоорондоо мессеж солилцож (баруун зүүн дохио өгөх) ойлголцох шаардлагатай болдог.